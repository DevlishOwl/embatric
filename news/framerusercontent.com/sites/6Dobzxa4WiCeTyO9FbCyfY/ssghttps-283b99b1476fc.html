import{executeOnSingleOrMultiple as e,OptionsColor as i,clamp as t,ExternalInteractorBase as o,isInArray as b,divModeExecute as l,isDivModeEnabled as s,getDistance as n,getRangeMax as a,mouseMoveEvent as u,mouseLeaveEvent as c,itemFromSingleOrMultiple
as r,rangeColorToHsl as d,rgbToHsl as v,colorMix as f,Circle as p,Rectangle as h,divMode as y}from"tsparticles-engine";class BubbleBase{constructor(){this.distance=200;this.duration=.4;this.mix=false}load(t){if(t){void 0!==t.distance&&(this.distance=t.distance);void
0!==t.duration&&(this.duration=t.duration);void 0!==t.mix&&(this.mix=t.mix);void 0!==t.opacity&&(this.opacity=t.opacity);if(void 0!==t.color){const o=this.color instanceof Array?void 0:this.color;this.color=e(t.color,(e=>i.create(o,e)))}void 0!==t.size&&(this.size=t.size)}}}class
BubbleDiv extends BubbleBase{constructor(){super();this.selectors=[]}get ids(){return e(this.selectors,(e=>e.replace("#","")))}set ids(i){this.selectors=e(i,(e=>`#${e}`))}load(e){super.load(e);if(e){void 0!==e.ids&&(this.ids=e.ids);void 0!==e.selectors&&(this.selectors=e.selectors)}}}class
Bubble extends BubbleBase{load(i){super.load(i);i&&(this.divs=e(i.divs,(e=>{const i=new BubbleDiv;i.load(e);return i})))}}function calculateBubbleValue(e,i,o,b){if(i>=o){const l=e+(i-o)*b;return t(l,e,i)}if(i
<o){const l=e-(o-i)*b;return t(l,i,e)}}class
    Bubbler extends o{constructor(e){super(e);e.bubble||(e.bubble={});this.handleClickMode=i=>{if("bubble"===i){e.bubble||(e.bubble={});e.bubble.clicking=true}}}clear(e,i,t){if(!e.bubble.inRange||t){delete e.bubble.div;delete e.bubble.opacity;delete e.bubble.radius;delete e.bubble.color}}init(){const e=this.container,i=e.actualOptions.interactivity.modes.bubble;if(i){e.retina.bubbleModeDistance=i.distance*e.retina.pixelRatio;void
    0!==i.size&&(e.retina.bubbleModeSize=i.size*e.retina.pixelRatio)}}async interact(e){const i=this.container.actualOptions,t=i.interactivity.events,o=t.onHover,s=t.onClick,n=o.enable,a=o.mode,u=s.enable,c=s.mode,r=t.onDiv;n&&b("bubble",a)?this.hoverBubble(e):u&&b("bubble",c)?this.clickBubble(e):l("bubble",r,((i,t)=>this.singleSelectorHover(e,i,t)))}isEnabled(e){var
    i;const t=this.container,o=t.actualOptions,l=t.interactivity.mouse,n=(null!==(i=null===e||void 0===e?void 0:e.interactivity)&&void 0!==i?i:o.interactivity).events,a=n.onDiv,u=s("bubble",a);if(!(u||n.onHover.enable&&l.position||n.onClick.enable&&l.clickPosition))return
    false;const c=n.onHover.mode;const r=n.onClick.mode;return b("bubble",c)||b("bubble",r)||u}loadModeOptions(e,...i){e.bubble||(e.bubble=new Bubble);for(const t of i)e.bubble.load(null===t||void 0===t?void 0:t.bubble)}reset(e){e.bubble.inRange=false}clickBubble(e){var
    i,t;const o=this.container,b=o.actualOptions,l=o.interactivity.mouse.clickPosition,s=b.interactivity.modes.bubble;if(!s||!l)return;o.bubble||(o.bubble={});const u=o.retina.bubbleModeDistance;if(!u||u
    <0)return;const c=o.particles.quadTree.queryCircle(l,u,(e=>this.isEnabled(e)));for(const e of c){if(!o.bubble.clicking)continue;e.bubble.inRange=!o.bubble.durationEnd;const b=e.getPosition(),c=n(b,l),r=((new Date).getTime()-(o.interactivity.mouse.clickTime||0))/1e3;r>s.duration&&(o.bubble.durationEnd=true);if(r>2*s.duration){o.bubble.clicking=false;o.bubble.durationEnd=false}const
        d={bubbleObj:{optValue:o.retina.bubbleModeSize,value:e.bubble.radius},particlesObj:{optValue:a(e.options.size.value)*o.retina.pixelRatio,value:e.size.value},type:"size"};this.process(e,c,r,d);const v={bubbleObj:{optValue:s.opacity,value:e.bubble.opacity},particlesObj:{optValue:a(e.options.opacity.value),value:null!==(t=null===(i=e.opacity)||void
        0===i?void 0:i.value)&&void 0!==t?t:1},type:"opacity"};this.process(e,c,r,v);o.bubble.durationEnd?delete e.bubble.color:c
        <=u?this.hoverBubbleColor(e,c):delete e.bubble.color}}hoverBubble(e){const i=this.container,t=i.interactivity.mouse.position,o=i.retina.bubbleModeDistance;if(!o||o<0||void
            0===t)return;const b=i.particles.quadTree.queryCircle(t,o,(e=>this.isEnabled(e)));for(const e of b){e.bubble.inRange=true;const b=e.getPosition(),l=n(b,t),s=1-l/o;if(l
            <=o){if(s>=0&&i.interactivity.status===u){this.hoverBubbleSize(e,s);this.hoverBubbleOpacity(e,s);this.hoverBubbleColor(e,s)}}else this.reset(e);i.interactivity.status===c&&this.reset(e)}}hoverBubbleColor(e,i,t){const o=this.container.actualOptions;const
                b=null!==t&&void 0!==t?t:o.interactivity.modes.bubble;if(b){if(!e.bubble.finalColor){const i=b.color;if(!i)return;const t=r(i);e.bubble.finalColor=d(t)}if(e.bubble.finalColor)if(b.mix){e.bubble.color=void 0;const t=e.getFillColor();e.bubble.color=t?v(f(t,e.bubble.finalColor,1-i,i)):e.bubble.finalColor}else
                e.bubble.color=e.bubble.finalColor}}hoverBubbleOpacity(e,i,t){var o,b,l,s;const n=this.container,u=n.actualOptions,c=null!==(o=null===t||void 0===t?void 0:t.opacity)&&void 0!==o?o:null===(b=u.interactivity.modes.bubble)||void 0===b?void
                0:b.opacity;if(!c)return;const r=e.options.opacity.value;const d=null!==(s=null===(l=e.opacity)||void 0===l?void 0:l.value)&&void 0!==s?s:1;const v=calculateBubbleValue(d,c,a(r),i);void 0!==v&&(e.bubble.opacity=v)}hoverBubbleSize(e,i,t){const
                o=this.container,b=(null===t||void 0===t?void 0:t.size)?t.size*o.retina.pixelRatio:o.retina.bubbleModeSize;if(void 0===b)return;const l=a(e.options.size.value)*o.retina.pixelRatio;const s=e.size.value;const n=calculateBubbleValue(s,b,l,i);void
                0!==n&&(e.bubble.radius=n)}process(e,i,t,o){const b=this.container,l=o.bubbleObj.optValue,s=b.actualOptions,n=s.interactivity.modes.bubble;if(!n||void 0===l)return;const a=n.duration,u=b.retina.bubbleModeDistance,c=o.particlesObj.optValue,r=o.bubbleObj.value,d=o.particlesObj.value||0,v=o.type;if(u&&!(u
                <0)&&l!==c){b.bubble||(b.bubble={});if(b.bubble.durationEnd){if(r){
                    "size"===v&&delete e.bubble.radius; "opacity"===v&&delete e.bubble.opacity}}else if(i<=u){const i=null!==r&&void 0!==r?r:d;if(i!==l){const i=d-t*(d-l)/a; "size"===v&&(e.bubble.radius=i); "opacity"===v&&(e.bubble.opacity=i)}}else{ "size"===v&&delete
                    e.bubble.radius; "opacity"===v&&delete e.bubble.opacity}}}singleSelectorHover(e,i,t){const o=this.container,b=document.querySelectorAll(i),l=o.actualOptions.interactivity.modes.bubble;l&&b.length&&b.forEach((i=>{const b=i,s=o.retina.pixelRatio,n={x:(b.offsetLeft+b.offsetWidth/2)*s,y:(b.offsetTop+b.offsetHeight/2)*s},a=b.offsetWidth/2*s,u="circle"===t.type?new p(n.x,n.y,a):new h(b.offsetLeft*s,b.offsetTop*s,b.offsetWidth*s,b.offsetHeight*s),c=o.particles.quadTree.query(u,(e=>this.isEnabled(e)));for(const
                    i of c){if(!u.contains(i.getPosition()))continue;i.bubble.inRange=true;const t=l.divs;const o=y(t,b);if(!i.bubble.div||i.bubble.div!==b){this.clear(i,e,true);i.bubble.div=b}this.hoverBubbleSize(i,1,o);this.hoverBubbleOpacity(i,1,o);this.hoverBubbleColor(i,1,o)}}))}}async
                    function loadExternalBubbleInteraction(e){await e.addInteractor("externalBubble",(e=>new Bubbler(e)))}export{Bubble,BubbleBase,BubbleDiv,loadExternalBubbleInteraction}; //# sourceMappingURL=index.js.map