import{ExternalInteractorBase as t,mouseMoveEvent as a,isInArray as i,Circle as c,getDistances as e,clamp as r,getEasing as n,Vector as o}from"tsparticles-engine";class Attract{constructor(){this.distance=200;this.duration=.4;this.easing="ease-out-quad";this.factor=1;this.maxSpeed=50;this.speed=1}load(t){if(t){void
0!==t.distance&&(this.distance=t.distance);void 0!==t.duration&&(this.duration=t.duration);void 0!==t.easing&&(this.easing=t.easing);void 0!==t.factor&&(this.factor=t.factor);void 0!==t.maxSpeed&&(this.maxSpeed=t.maxSpeed);void 0!==t.speed&&(this.speed=t.speed)}}}class
Attractor extends t{constructor(t,a){super(a);this._engine=t;a.attract||(a.attract={particles:[]});this.handleClickMode=t=>{const i=this.container.actualOptions,c=i.interactivity.modes.attract;if(c&&"attract"===t){a.attract||(a.attract={particles:[]});a.attract.clicking=true;a.attract.count=0;for(const
t of a.attract.particles)this.isEnabled(t)&&t.velocity.setTo(t.initialVelocity);a.attract.particles=[];a.attract.finish=false;setTimeout((()=>{if(!a.destroyed){a.attract||(a.attract={particles:[]});a.attract.clicking=false}}),1e3*c.duration)}}}clear(){}init(){const
t=this.container,a=t.actualOptions.interactivity.modes.attract;a&&(t.retina.attractModeDistance=a.distance*t.retina.pixelRatio)}async interact(){const t=this.container,c=t.actualOptions,e=t.interactivity.status===a,r=c.interactivity.events,n=r.onHover.enable,o=r.onHover.mode,s=r.onClick.enable,d=r.onClick.mode;e&&n&&i("attract",o)?this.hoverAttract():s&&i("attract",d)&&this.clickAttract()}isEnabled(t){var
a;const c=this.container,e=c.actualOptions,r=c.interactivity.mouse,n=(null!==(a=null===t||void 0===t?void 0:t.interactivity)&&void 0!==a?a:e.interactivity).events;if((!r.position||!n.onHover.enable)&&(!r.clickPosition||!n.onClick.enable))return false;const
o=n.onHover.mode,s=n.onClick.mode;return i("attract",o)||i("attract",s)}loadModeOptions(t,...a){t.attract||(t.attract=new Attract);for(const i of a)t.attract.load(null===i||void 0===i?void 0:i.attract)}reset(){}clickAttract(){const t=this.container;t.attract||(t.attract={particles:[]});if(!t.attract.finish){t.attract.count||(t.attract.count=0);t.attract.count++;t.attract.count===t.particles.count&&(t.attract.finish=true)}if(t.attract.clicking){const
a=t.interactivity.mouse.clickPosition,i=t.retina.attractModeDistance;if(!i||i
<0||!a)return;this.processAttract(a,i,new c(a.x,a.y,i))}else false===t.attract.clicking&&(t.attract.particles=[])}hoverAttract(){const t=this.container,a=t.interactivity.mouse.position,i=t.retina.attractModeDistance;!i||i<0||!a||this.processAttract(a,i,new
    c(a.x,a.y,i))}processAttract(t,a,i){const c=this.container,s=c.actualOptions.interactivity.modes.attract;if(!s)return;const d=c.particles.quadTree.query(i,(t=>this.isEnabled(t)));for(const i of d){const{dx:c,dy:d,distance:l}=e(i.position,t);const u=s.speed*s.factor;const p=r(n(s.easing)(1-l/a)*u,0,s.maxSpeed);const h=o.create(0===l?u:c/l*p,0===l?u:d/l*p);i.position.subFrom(h)}}}async function loadExternalAttractInteraction(t){await
    t.addInteractor("externalAttract",(a=>new Attractor(t,a)))}export{Attract,loadExternalAttractInteraction}; //# sourceMappingURL=index.js.map