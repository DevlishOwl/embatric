import{executeOnSingleOrMultiple as e,ExternalInteractorBase as s,mouseMoveEvent as t,isInArray as i,divModeExecute as o,isDivModeEnabled as n,Circle as l,getDistances as r,Vector as c,clamp as a,getEasing as p,Rectangle as u,divMode as d}from"tsparticles-engine";class
RepulseBase{constructor(){this.distance=200;this.duration=.4;this.factor=100;this.speed=1;this.maxSpeed=50;this.easing="ease-out-quad"}load(e){if(e){void 0!==e.distance&&(this.distance=e.distance);void 0!==e.duration&&(this.duration=e.duration);void 0!==e.easing&&(this.easing=e.easing);void
0!==e.factor&&(this.factor=e.factor);void 0!==e.speed&&(this.speed=e.speed);void 0!==e.maxSpeed&&(this.maxSpeed=e.maxSpeed)}}}class RepulseDiv extends RepulseBase{constructor(){super();this.selectors=[]}get ids(){return e(this.selectors,(e=>e.replace("#","")))}set
ids(s){this.selectors=e(s,(e=>`#${e}`))}load(e){super.load(e);if(e){void 0!==e.ids&&(this.ids=e.ids);void 0!==e.selectors&&(this.selectors=e.selectors)}}}class Repulse extends RepulseBase{load(s){super.load(s);s&&(this.divs=e(s.divs,(e=>{const s=new RepulseDiv;s.load(e);return
s})))}}class Repulser extends s{constructor(e,s){super(s);this._engine=e;s.repulse||(s.repulse={particles:[]});this.handleClickMode=e=>{const t=this.container.actualOptions,i=t.interactivity.modes.repulse;if(i&&"repulse"===e){s.repulse||(s.repulse={particles:[]});s.repulse.clicking=true;s.repulse.count=0;for(const
e of s.repulse.particles)this.isEnabled(e)&&e.velocity.setTo(e.initialVelocity);s.repulse.particles=[];s.repulse.finish=false;setTimeout((()=>{if(!s.destroyed){s.repulse||(s.repulse={particles:[]});s.repulse.clicking=false}}),1e3*i.duration)}}}clear(){}init(){const
e=this.container,s=e.actualOptions.interactivity.modes.repulse;s&&(e.retina.repulseModeDistance=s.distance*e.retina.pixelRatio)}async interact(){const e=this.container,s=e.actualOptions,n=e.interactivity.status===t,l=s.interactivity.events,r=l.onHover.enable,c=l.onHover.mode,a=l.onClick.enable,p=l.onClick.mode,u=l.onDiv;n&&r&&i("repulse",c)?this.hoverRepulse():a&&i("repulse",p)?this.clickRepulse():o("repulse",u,((e,s)=>this.singleSelectorRepulse(e,s)))}isEnabled(e){var
s;const t=this.container,o=t.actualOptions,l=t.interactivity.mouse,r=(null!==(s=null===e||void 0===e?void 0:e.interactivity)&&void 0!==s?s:o.interactivity).events,c=r.onDiv,a=n("repulse",c);if(!(a||r.onHover.enable&&l.position||r.onClick.enable&&l.clickPosition))return
false;const p=r.onHover.mode,u=r.onClick.mode;return i("repulse",p)||i("repulse",u)||a}loadModeOptions(e,...s){e.repulse||(e.repulse=new Repulse);for(const t of s)e.repulse.load(null===t||void 0===t?void 0:t.repulse)}reset(){}clickRepulse(){const e=this.container,s=e.actualOptions.interactivity.modes.repulse;if(s){e.repulse||(e.repulse={particles:[]});if(!e.repulse.finish){e.repulse.count||(e.repulse.count=0);e.repulse.count++;e.repulse.count===e.particles.count&&(e.repulse.finish=true)}if(e.repulse.clicking){const
t=e.retina.repulseModeDistance;if(!t||t
<0)return;const i=Math.pow(t/6,3),o=e.interactivity.mouse.clickPosition;if(void 0===o)return;const n=new l(o.x,o.y,i),a=e.particles.quadTree.query(n,(e=>this.isEnabled(e)));for(const t of a){const{dx:n,dy:l,distance:a}=r(o,t.position),p=a**2,u=s.speed,d=-i*u/p;if(p
    <=i){e.repulse.particles.push(t);const s=c.create(n,l);s.length=d;t.velocity.setTo(s)}}}else if(false===e.repulse.clicking){for(const s of
        e.repulse.particles)s.velocity.setTo(s.initialVelocity);e.repulse.particles=[]}}}hoverRepulse(){const e=this.container,s=e.interactivity.mouse.position,t=e.retina.repulseModeDistance;!t||t<0||!s||this.processRepulse(s,t,new l(s.x,s.y,t))}processRepulse(e,s,t,i){var
        o;const n=this.container,l=n.particles.quadTree.query(t,(e=>this.isEnabled(e))),u=n.actualOptions.interactivity.modes.repulse;if(u)for(const t of l){const{dx:n,dy:l,distance:d}=r(t.position,e),f=(null!==(o=null===i||void 0===i?void 0:i.speed)&&void 0!==o?o:u.speed)*u.factor,h=a(p(u.easing)(1-d/s)*f,0,u.maxSpeed),v=c.create(0===d?f:n/d*h,0===d?f:l/d*h);t.position.addTo(v)}}singleSelectorRepulse(e,s){const
        t=this.container,i=t.actualOptions.interactivity.modes.repulse;if(!i)return;const o=document.querySelectorAll(e);o.length&&o.forEach((e=>{const o=e,n=t.retina.pixelRatio,r={x:(o.offsetLeft+o.offsetWidth/2)*n,y:(o.offsetTop+o.offsetHeight/2)*n},c=o.offsetWidth/2*n,a="circle"===s.type?new
        l(r.x,r.y,c):new u(o.offsetLeft*n,o.offsetTop*n,o.offsetWidth*n,o.offsetHeight*n),p=i.divs,f=d(p,o);this.processRepulse(r,c,a,f)}))}}async function loadExternalRepulseInteraction(e){await e.addInteractor("externalRepulse",(s=>new Repulser(e,s)))}export{Repulse,RepulseBase,RepulseDiv,loadExternalRepulseInteraction};
        //# sourceMappingURL=index.js.map