import{Circle as i,Rectangle as n,OptionsColor as t,getDistance as s,ParticlesInteractorBase as e,getLinkRandomColor as o,drawLine as r,getDistances as l,getStyleFromRgb as a,rangeColorToRgb as c,drawTriangle as d,getRandom as u,getRangeValue as h,getLinkColor
as k}from"tsparticles-engine";class CircleWarp extends i{constructor(i,n,t,s){super(i,n,t);this.canvasSize=s;this.canvasSize=Object.assign({},s)}contains(i){if(super.contains(i))return true;const n={x:i.x-this.canvasSize.width,y:i.y};if(super.contains(n))return
true;const t={x:i.x-this.canvasSize.width,y:i.y-this.canvasSize.height};if(super.contains(t))return true;const s={x:i.x,y:i.y-this.canvasSize.height};return super.contains(s)}intersects(t){if(super.intersects(t))return true;const s=t,e=t,o={x:t.position.x-this.canvasSize.width,y:t.position.y-this.canvasSize.height};if(void
0!==e.radius){const n=new i(o.x,o.y,2*e.radius);return super.intersects(n)}if(void 0!==s.size){const i=new n(o.x,o.y,2*s.size.width,2*s.size.height);return super.intersects(i)}return false}}class LinksShadow{constructor(){this.blur=5;this.color=new t;this.color.value="#000";this.enable=false}load(i){if(i){void
0!==i.blur&&(this.blur=i.blur);this.color=t.create(this.color,i.color);void 0!==i.enable&&(this.enable=i.enable)}}}class LinksTriangle{constructor(){this.enable=false;this.frequency=1}load(i){if(i){void 0!==i.color&&(this.color=t.create(this.color,i.color));void
0!==i.enable&&(this.enable=i.enable);void 0!==i.frequency&&(this.frequency=i.frequency);void 0!==i.opacity&&(this.opacity=i.opacity)}}}class Links{constructor(){this.blink=false;this.color=new t;this.color.value="#fff";this.consent=false;this.distance=100;this.enable=false;this.frequency=1;this.opacity=1;this.shadow=new
LinksShadow;this.triangles=new LinksTriangle;this.width=1;this.warp=false}load(i){if(i){void 0!==i.id&&(this.id=i.id);void 0!==i.blink&&(this.blink=i.blink);this.color=t.create(this.color,i.color);void 0!==i.consent&&(this.consent=i.consent);void 0!==i.distance&&(this.distance=i.distance);void
0!==i.enable&&(this.enable=i.enable);void 0!==i.frequency&&(this.frequency=i.frequency);void 0!==i.opacity&&(this.opacity=i.opacity);this.shadow.load(i.shadow);this.triangles.load(i.triangles);void 0!==i.width&&(this.width=i.width);void 0!==i.warp&&(this.warp=i.warp)}}}function
getLinkDistance(i,n,t,e,o){let r=s(i,n);if(!o||r
<=t)return r;const l={x:n.x-e.width,y:n.y};r=s(i,l);if(r<=t)return r;const a={x:n.x-e.width,y:n.y-e.height};r=s(i,a);if(r<=t)return r;const c={x:n.x,y:n.y-e.height};r=s(i,c);return r}class Linker extends
    e{constructor(i){super(i);this.linkContainer=i}clear(){}init(){this.linkContainer.particles.linksColor=void 0;this.linkContainer.particles.linksColors=new Map}async interact(n){var t;if(!n.options.links)return;n.links=[];const s=n.getPosition(),e=this.container,o=e.canvas.size;if(s.x<0||s.y<0||s.x>o.width||s.y>o.height)return;const r=n.options.links,l=r.opacity,a=null!==(t=n.retina.linksDistance)&&void 0!==t?t:0,c=r.warp,d=c?new CircleWarp(s.x,s.y,a,o):new i(s.x,s.y,a),u=e.particles.quadTree.query(d);for(const i of u){const t=i.options.links;if(n===i||!(null===t||void
    0===t?void 0:t.enable)||r.id!==t.id||i.spawning||i.destroyed||!i.links||-1!==n.links.map((i=>i.destination)).indexOf(i)||-1!==i.links.map((i=>i.destination)).indexOf(n))continue;const e=i.getPosition();if(e.x
    <0||e.y<0||e.x>o.width||e.y>o.height)continue;const d=getLinkDistance(s,e,a,o,c&&t.warp);if(d>a)return;const u=(1-d/a)*l;this.setColor(n);n.links.push({destination:i,opacity:u})}}isEnabled(i){var n;return!!(null===(n=i.options.links)||void 0===n?void 0:n.enable)}loadParticlesOptions(i,...n){var
        t,s;i.links||(i.links=new Links);for(const e of n)i.links.load(null!==(s=null!==(t=null===e||void 0===e?void 0:e.links)&&void 0!==t?t:null===e||void 0===e?void 0:e.lineLinked)&&void 0!==s?s:null===e||void 0===e?void 0:e.line_linked)}reset(){}setColor(i){if(!i.options.links)return;const
        n=this.linkContainer,t=i.options.links;let s=void 0===t.id?n.particles.linksColor:n.particles.linksColors.get(t.id);if(s)return;const e=t.color;s=o(e,t.blink,t.consent);void 0===t.id?n.particles.linksColor=s:n.particles.linksColors.set(t.id,s)}}async
        function loadInteraction(i){await i.addInteractor("particlesLinks",(i=>new Linker(i)))}function drawLinkLine(i,n,t,e,o,d,u,h,k,p,f,y){let v=false;if(s(t,e)
        <=o){r(i,t,e);v=true}else if(u){let n;let s;const a={x:e.x-d.width,y:e.y};const c=l(t,a);if(c.distance<=o){const
            i=t.y-c.dy/c.dx*t.x;n={x:0,y:i};s={x:d.width,y:i}}else{const i={x:e.x,y:e.y-d.height};const r=l(t,i);if(r.distance<=o){const i=t.y-r.dy/r.dx*t.x;const e=-i/(r.dy/r.dx);n={x:e,y:0};s={x:e,y:d.height}}else{const i={x:e.x-d.width,y:e.y-d.height};const
            r=l(t,i);if(r.distance<=o){const i=t.y-r.dy/r.dx*t.x;const e=-i/(r.dy/r.dx);n={x:e,y:i};s={x:n.x+d.width,y:n.y+d.height}}}}if(n&&s){r(i,t,n);r(i,e,s);v=true}}if(v){i.lineWidth=n;h&&(i.globalCompositeOperation=k);i.strokeStyle=a(p,f);if(y.enable){const
            n=c(y.color);if(n){i.shadowBlur=y.blur;i.shadowColor=a(n)}}i.stroke()}}function drawLinkTriangle(i,n,t,s,e,o,r,l){d(i,n,t,s);e&&(i.globalCompositeOperation=o);i.fillStyle=a(r,l);i.fill()}function getLinkKey(i){i.sort(((i,n)=>i-n));return i.join("_")}function setLinkFrequency(i,n){const t=getLinkKey(i.map((i=>i.id)));let s=n.get(t);if(void 0===s){s=u();n.set(t,s)}return s}class LinkInstance{constructor(i){this.container=i;this._freqs={links:new Map,triangles:new Map}}drawParticle(i,n){var
            t;const s=n.options;if(!n.links||n.links.length
            <=0)return;const e=n.links.filter((i=>s.links&&this.getLinkFrequency(n,i.destination)
                <=s.links.frequency));for(const i of e){this.drawTriangles(s,n,i,e);i.opacity>0&&(null!==(t=n.retina.linksWidth)&&void 0!==t?t:0)>0&&this.drawLinkLine(n,i)}}async init(){this._freqs.links=new Map;this._freqs.triangles=new Map}particleCreated(i){i.links=[];if(!i.options.links)return;const n=this.container.retina.pixelRatio;i.retina.linksDistance=i.options.links.distance*n;i.retina.linksWidth=i.options.links.width*n}particleDestroyed(i){i.links=[]}drawLinkLine(i,n){const
                    t=this.container,s=t.actualOptions,e=n.destination,o=i.getPosition(),r=e.getPosition();let l=n.opacity;t.canvas.draw((n=>{var a,d,p;if(!i.options.links)return;let f;const y=null===(a=i.options.twinkle)||void 0===a?void 0:a.lines;if(null===y||void
                    0===y?void 0:y.enable){const i=y.frequency,n=c(y.color),t=u()
                    <i;if(t&&n){f=n;l=h(y.opacity)}}if(!f){const n=i.options.links,s=void 0!==(null===n||void 0===n?void 0:n.id)?t.particles.linksColors.get(n.id):t.particles.linksColor;f=k(i,e,s)}if(!f)return;const
                        v=null!==(d=i.retina.linksWidth)&&void 0!==d?d:0,g=null!==(p=i.retina.linksDistance)&&void 0!==p?p:0;drawLinkLine(n,v,o,r,g,t.canvas.size,i.options.links.warp,s.backgroundMask.enable,s.backgroundMask.composite,f,l,i.options.links.shadow)}))}drawLinkTriangle(i,n,t){var
                        e;if(!i.options.links)return;const o=this.container,r=o.actualOptions,l=n.destination,a=t.destination,d=i.options.links.triangles,u=null!==(e=d.opacity)&&void 0!==e?e:(n.opacity+t.opacity)/2;u<=0||o.canvas.draw((n=>{var t;const e=i.getPosition(),h=l.getPosition(),p=a.getPosition(),f=null!==(t=i.retina.linksDistance)&&void 0!==t?t:0;if(s(e,h)>f||s(p,h)>f||s(p,e)>f)return;let y=c(d.color);if(!y){const n=i.options.links,t=void 0!==(null===n||void
                        0===n?void 0:n.id)?o.particles.linksColors.get(n.id):o.particles.linksColor;y=k(i,l,t)}y&&drawLinkTriangle(n,e,h,p,r.backgroundMask.enable,r.backgroundMask.composite,y,u)}))}drawTriangles(i,n,t,s){var e,o,r;const l=t.destination;if(!((null===(e=i.links)||void
                        0===e?void 0:e.triangles.enable)&&(null===(o=l.options.links)||void 0===o?void 0:o.triangles.enable)))return;const a=null===(r=l.links)||void 0===r?void 0:r.filter((i=>{const n=this.getLinkFrequency(l,i.destination);return l.options.links&&n
                        <=l.options.links.frequency&&s.findIndex((n=>n.destination===i.destination))>=0}));if(null===a||void 0===a?void 0:a.length)for(const s of a){const e=s.destination,o=this.getTriangleFrequency(n,l,e);o>i.links.triangles.frequency||this.drawLinkTriangle(n,t,s)}}getLinkFrequency(i,n){return
                            setLinkFrequency([i,n],this._freqs.links)}getTriangleFrequency(i,n,t){return setLinkFrequency([i,n,t],this._freqs.triangles)}}class LinksPlugin{constructor(){this.id="links"}getPlugin(i){return new LinkInstance(i)}loadOptions(){}needsPlugin(){return
                            true}}async function loadPlugin(i){const n=new LinksPlugin;await i.addPlugin(n)}async function loadParticlesLinksInteraction(i){await loadInteraction(i);await loadPlugin(i)}export{Links,LinksShadow,LinksTriangle,loadParticlesLinksInteraction};
                            //# sourceMappingURL=index.js.map