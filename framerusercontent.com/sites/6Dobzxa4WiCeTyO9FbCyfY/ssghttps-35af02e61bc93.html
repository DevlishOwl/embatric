import{ValueWithRandom as i,OptionsColor as s,setRangeValue as t,Vector as o,getRangeValue as e,rangeColorToRgb as r,getDistance as n,getDistances as a,getStyleFromRgb as l,isPointInside as c,calcPositionOrRandomFromSizeRanged as h,calcPositionOrRandomFromSize
as b,getRandom as d,itemFromSingleOrMultiple as u,executeOnSingleOrMultiple as p,isInArray as v}from"tsparticles-engine";class AbsorberSizeLimit{constructor(){this.radius=0;this.mass=0}load(i){if(i){void 0!==i.mass&&(this.mass=i.mass);void 0!==i.radius&&(this.radius=i.radius)}}}class
AbsorberSize extends i{constructor(){super();this.density=5;this.value=50;this.limit=new AbsorberSizeLimit}load(i){if(i){super.load(i);void 0!==i.density&&(this.density=i.density);"number"===typeof i.limit?this.limit.radius=i.limit:this.limit.load(i.limit)}}}class
Absorber{constructor(){this.color=new s;this.color.value="#000000";this.draggable=false;this.opacity=1;this.destroy=true;this.orbits=false;this.size=new AbsorberSize}load(i){if(void 0!==i){void 0!==i.color&&(this.color=s.create(this.color,i.color));void
0!==i.draggable&&(this.draggable=i.draggable);this.name=i.name;void 0!==i.opacity&&(this.opacity=i.opacity);if(void 0!==i.position){this.position={};void 0!==i.position.x&&(this.position.x=t(i.position.x));void 0!==i.position.y&&(this.position.y=t(i.position.y))}void
0!==i.size&&this.size.load(i.size);void 0!==i.destroy&&(this.destroy=i.destroy);void 0!==i.orbits&&(this.orbits=i.orbits)}}}class AbsorberInstance{constructor(i,s,t,n){var a,l,c;this.absorbers=i;this.container=s;this.initialPosition=n?o.create(n.x,n.y):void
0;if(t instanceof Absorber)this.options=t;else{this.options=new Absorber;this.options.load(t)}this.dragging=false;this.name=this.options.name;this.opacity=this.options.opacity;this.size=e(this.options.size.value)*s.retina.pixelRatio;this.mass=this.size*this.options.size.density*s.retina.reduceFactor;const
h=this.options.size.limit;this.limit={radius:h.radius*s.retina.pixelRatio*s.retina.reduceFactor,mass:h.mass};this.color=null!==(a=r(this.options.color))&&void 0!==a?a:{b:0,g:0,r:0};this.position=null!==(c=null===(l=this.initialPosition)||void 0===l?void
0:l.copy())&&void 0!==c?c:this.calcPosition()}attract(i){const s=this.container,t=this.options;if(t.draggable){const i=s.interactivity.mouse;if(i.clicking&&i.downPosition){const s=n(this.position,i.downPosition);s
<=this.size&&(this.dragging=true)}else
    this.dragging=false;if(this.dragging&&i.position){this.position.x=i.position.x;this.position.y=i.position.y}}const e=i.getPosition(),{dx:r,dy:l,distance:c}=a(this.position,e),h=o.create(r,l);h.length=this.mass/Math.pow(c,2)*s.retina.reduceFactor;if(c<this.size+i.getRadius()){const
    o=.033*i.getRadius()*s.retina.pixelRatio;if(this.size>i.getRadius()&&c
    <this.size-i.getRadius()||void 0!==i.absorberOrbit&&i.absorberOrbit.length<0)if(t.destroy)i.destroy();else{i.needsNewPosition=true;this.updateParticlePosition(i,h)}else{t.destroy&&(i.size.value-=o);this.updateParticlePosition(i,h)}(this.limit.radius<=0||this.size<this.limit.radius)&&(this.size+=o);(this.limit.mass<=0||this.mass<this.limit.mass)&&(this.mass+=o*this.options.size.density*s.retina.reduceFactor)}else
        this.updateParticlePosition(i,h)}draw(i){i.translate(this.position.x,this.position.y);i.beginPath();i.arc(0,0,this.size,0,2*Math.PI,false);i.closePath();i.fillStyle=l(this.color,this.opacity);i.fill()}resize(){const i=this.initialPosition;this.position=i&&c(i,this.container.canvas.size,o.origin)?i:this.calcPosition()}calcPosition(){const
        i=h({size:this.container.canvas.size,position:this.options.position});return o.create(i.x,i.y)}updateParticlePosition(i,s){var t;if(i.destroyed)return;const e=this.container,r=e.canvas.size;if(i.needsNewPosition){const s=b({size:r});i.position.setTo(s);i.velocity.setTo(i.initialVelocity);i.absorberOrbit=void
        0;i.needsNewPosition=false}if(this.options.orbits){if(void 0===i.absorberOrbit){i.absorberOrbit=o.create(0,0);i.absorberOrbit.length=n(i.getPosition(),this.position);i.absorberOrbit.angle=d()*Math.PI*2}if(i.absorberOrbit.length<=this.size&&!this.options.destroy){const
        s=Math.min(r.width,r.height);i.absorberOrbit.length=s*(.2*d()-.1+1)}void 0===i.absorberOrbitDirection&&(i.absorberOrbitDirection=i.velocity.x>=0?"clockwise":"counter-clockwise");const a=i.absorberOrbit.length,l=i.absorberOrbit.angle,c=i.absorberOrbitDirection;i.velocity.setTo(o.origin);const h={x:"clockwise"===c?Math.cos:Math.sin,y:"clockwise"===c?Math.sin:Math.cos};i.position.x=this.position.x+a*h.x(l);i.position.y=this.position.y+a*h.y(l);i.absorberOrbit.length-=s.length;i.absorberOrbit.angle+=(null!==(t=i.retina.moveSpeed)&&void
        0!==t?t:0)*e.retina.pixelRatio/100*e.retina.reduceFactor}else{const t=o.origin;t.length=s.length;t.angle=s.angle;i.velocity.addTo(t)}}}class Absorbers{constructor(i){this.container=i;this.array=[];this.absorbers=[];this.interactivityAbsorbers=[];i.getAbsorber=i=>void
        0===i||"number"===typeof i?this.array[i||0]:this.array.find((s=>s.name===i));i.addAbsorber=(i,s)=>this.addAbsorber(i,s)}addAbsorber(i,s){const t=new AbsorberInstance(this,this.container,i,s);this.array.push(t);return t}draw(i){for(const s of this.array)s.draw(i)}handleClickMode(i){const
        s=this.absorbers,t=this.interactivityAbsorbers;if("absorber"===i){const i=u(t),o=null!==i&&void 0!==i?i:u(s),e=this.container.interactivity.mouse.clickPosition;this.addAbsorber(o,e)}}async init(){this.absorbers=this.container.actualOptions.absorbers;this.interactivityAbsorbers=this.container.actualOptions.interactivity.modes.absorbers;p(this.absorbers,(i=>{this.addAbsorber(i)}))}particleUpdate(i){for(const
        s of this.array){s.attract(i);if(i.destroyed)break}}removeAbsorber(i){const s=this.array.indexOf(i);s>=0&&this.array.splice(s,1)}resize(){for(const i of this.array)i.resize()}stop(){this.array=[]}}class AbsorbersPlugin{constructor(){this.id="absorbers"}getPlugin(i){return
        new Absorbers(i)}loadOptions(i,s){var t,o;if(this.needsPlugin(i)||this.needsPlugin(s)){(null===s||void 0===s?void 0:s.absorbers)&&(i.absorbers=p(s.absorbers,(i=>{const s=new Absorber;s.load(i);return s})));i.interactivity.modes.absorbers=p(null===(o=null===(t=null===s||void
        0===s?void 0:s.interactivity)||void 0===t?void 0:t.modes)||void 0===o?void 0:o.absorbers,(i=>{const s=new Absorber;s.load(i);return s}))}}needsPlugin(i){var s,t,o;if(!i)return false;const e=i.absorbers;return e instanceof Array?!!e.length:!!e||!(!(null===(o=null===(t=null===(s=i.interactivity)||void
        0===s?void 0:s.events)||void 0===t?void 0:t.onClick)||void 0===o?void 0:o.mode)||!v("absorber",i.interactivity.events.onClick.mode))}}async function loadAbsorbersPlugin(i){const s=new AbsorbersPlugin;await i.addPlugin(s)}export{loadAbsorbersPlugin};
        //# sourceMappingURL=index.js.map